function messenger_notiftop(a,b,c){topmsg=Messenger({extraClasses:"messenger-on-top messenger-fixed"}).post({message:a,type:void 0===typeof b?"info":b,id:"notif-top",hideAfter:"undefined"!=typeof c?c:3})}function messenger_hidenotiftop(){"object"==typeof topmsg&&topmsg.hide()}function pusher_global(){var a=pusher.subscribe("presence-global");a.bind("pusher:subscription_succeeded",function(){})}function pusher_user(){var a=pusher.subscribe("private-user-"+document.getElementById("user_id").value);a.bind("pusher:subscription_succeeded",function(){a.bind("notification_new",function(a){$.notification_list.prepend(a.html),$.notification_list.find("abbr[data-livestamp]").livestamp($(this).attr("data-livestamp")),$.bigBox({title:'<a href="'+a.url+'" class="pjax">'+a.title+"</a>",content:a.content,color:a.color,icon:"fa fadeInLeft animated "+a.icon,timeout:1e4}),$.notification_count.html(parseInt($.notification_count.html())+1).addClass("bg-color-red")})})}function pusherSubscribeCurrentPresenceChannel(a,b){presenceChannelCurrentSubscriptions.push("presence-"+document.getElementById("channel_name").value),presenceChannelCurrent=pusher.subscribe("presence-"+document.getElementById("channel_name").value),presenceChannelCurrent.bind("pusher:subscription_succeeded",function(){presenceChannelCurrent.members.each(function(a){a.id!=presenceChannelCurrent.members.me.id&&($(".whos-online").children("#user_"+a.id).length||($(".whos-online").append(avatarHTML(a)),$(".whos-online .avatar").tooltip()))}),presenceChannelCurrent.bind("pusher:member_added",function(a){$(".whos-online").children("#user_"+a.id).length||($(".whos-online").append(avatarHTML(a)),$(".whos-online .avatar").tooltip())}),presenceChannelCurrent.bind("pusher:member_removed",function(a){$("#user_"+a.id).tooltip("destroy"),$("#user_"+a.id).remove()}),presenceChannelCurrent.bind("html-update",function(a){var b=$("#"+a.id);b.length&&b.html(a.html)}),presenceChannelCurrent.bind("message",function(a){switch(a.message){case"small":$.smallBox({title:a.title,content:a.content,color:"#3276b1",timeout:4e3});break;case"big":$.SmartMessageBox({title:a.title,content:a.content,buttons:"[Ok]"})}}),"undefined"!=typeof a&&a&&(presenceChannelCurrent.bind("pusher:member_added",function(){var a=$(".editable-open");a.length&&presenceChannelCurrent.trigger("client-editable-shown",{user:presenceChannelCurrent.members.me,id:a.attr("id")})}),presenceChannelCurrent.bind("pusher:member_removed",function(a){var b=$('.editable[pusher-user="'+a.id+'"]');b.length&&(b.tooltip("destroy"),b.removeClass("editable-color-"+a.info.avatarColor),b.removeAttr("pusher-user"),b.editable("enable"))}),presenceChannelCurrent.bind("client-editable-shown",function(a){var b=$("#"+a.id);b.length&&(b.attr("pusher-user",a.user.id),b.addClass("editable-color-"+a.user.info.avatarColor),b.tooltip({title:'<i class="fa fa-edit" title="Editing"></i> '+a.user.info.name,animation:!1,html:!0,placement:"right",trigger:"manual",template:'<div class="tooltip" role="tooltip"><div class="tooltip-arrow"></div><div class="tooltip-inner avatar-color-'+a.user.info.avatarColor+'"></div></div>'}),b.tooltip("show"),b.editable("disable"))}),presenceChannelCurrent.bind("client-editable-hidden",function(a){var b=$("#"+a.id);b.tooltip("hide"),b.tooltip("destroy"),b.removeClass("editable-color-"+a.user.info.avatarColor),b.removeAttr("pusher-user"),b.editable("enable")}),presenceChannelCurrent.bind("client-editable-save",function(a){var b=$("#"+a.id);"date"==b.attr("data-type")?null===a.newValue?b.editable("setValue",null):b.editable("setValue",moment(a.newValue,"YYYY-MM-DDTHH:mm:ssZ").toDate(),!0):b.editable("setValue",a.newValue,!0),b.effect("highlight",{color:"lightgreen"},1e3)}),"undefined"!=typeof b&&b&&(presenceChannelCurrent.bind("client-multi-add",function(a){var b=$('fieldset.dummy[data-name="'+a.context+'"]');b.length&&(addMulti(b,a.pk),Messenger({extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right"}).post({showCloseButton:!0,type:"info",message:avatarHTML(a.user)+" has added "+a.context+" (ID:"+a.pk.id+") - <i>just now</i>",hideAfter:5}))}),presenceChannelCurrent.bind("client-multi-delete",function(a){var b=$("#"+a.id),c=b.parents("fieldset.multi");c.length&&(Messenger({extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right"}).post({showCloseButton:!0,type:"info",message:avatarHTML(a.user)+" has deleted "+a.context+" (ID:"+a.id.split("_").slice(-1)[0]+") - <i>just now</i>",hideAfter:5}),c.slideUp("500",function(){$(this).remove()}))})))})}function jsLoader(a){if($.each(a,function(b,c){jsArray[c]?a.splice(b,1):jsArray[c]=!0}),a.length){messenger_notiftop("Loading..","info",0);var b=new createjs.LoadQueue(!1);b.maintainScriptOrder=!0,b.loadManifest(a),b.on("complete",pageSetUp,this),b.on("error",function(){messenger_notiftop('Failed to load page. <a class="pjax" href="'+document.URL+'">Click here to reload</a>',"error",0)})}}function avatarHTML(a){return'<i id="user_'+a.id+'" rel="tooltip" data-original-title="'+a.info.name+'" data-placement="bottom" class="avatar avatar-sm avatar-color-'+a.info.avatarColor+'">'+a.info.avatarLetter+"</i>"}function maintainRecentProject(){if(document.getElementById("project-url")&&document.getElementById("project-name")&&document.getElementById("project-url"))if($("#project-context ul.dropdown-menu").find("a#project_"+document.getElementById("project-id").value).length){var a=$("#project-context ul.dropdown-menu").find("a#project_"+document.getElementById("project-id").value).parents("li.project").detach();$("#project-context ul.dropdown-menu").prepend(a)}else $("#project-context ul.dropdown-menu").prepend('<li class="project"><a id="project_'+document.getElementById("project-id").value+'" href="'+document.getElementById("project-url").value+'" class="pjax">'+document.getElementById("project-name").value+"</a></li>"),$("#project-context ul.dropdown-menu li.project:gt(4)").remove()}function clearRecentProject(){$("#project-context ul.dropdown-menu li.project").remove()}function launchFullscreen(a){$.root_.hasClass("full-screen")?($.root_.removeClass("full-screen"),document.exitFullscreen?document.exitFullscreen():document.mozCancelFullScreen?document.mozCancelFullScreen():document.webkitExitFullscreen&&document.webkitExitFullscreen()):($.root_.addClass("full-screen"),a.requestFullscreen?a.requestFullscreen():a.mozRequestFullScreen?a.mozRequestFullScreen():a.webkitRequestFullscreen?a.webkitRequestFullscreen():a.msRequestFullscreen&&a.msRequestFullscreen())}function runAllForms(){$.fn.slider&&$(".slider").slider(),$.fn.select2&&$(".select2").each(function(){var a=$(this),b=a.attr("data-select-width")||"100%";a.select2({allowClear:!0,width:b})}),$.fn.mask&&$("[data-mask]").each(function(){var a=$(this),b=a.attr("data-mask")||"error...",c=a.attr("data-mask-placeholder")||"X";a.mask(b,{placeholder:c})}),$.fn.autocomplete&&$("[data-autocomplete]").each(function(){var a=$(this),b=a.data("autocomplete")||["The","Quick","Brown","Fox","Jumps","Over","Three","Lazy","Dogs"];a.autocomplete({source:b})}),$("button[data-loading-text]").on("click",function(){var a=$(this);a.button("loading"),setTimeout(function(){a.button("reset")},3e3)})}function runAllCharts(){$.fn.sparkline&&$(".sparkline").each(function(){var a=$(this),b=a.data("sparkline-type")||"bar";if("bar"==b){var c=a.data("sparkline-bar-color")||a.css("color")||"#0000f0",d=a.data("sparkline-height")||"26px",e=a.data("sparkline-barwidth")||5,f=a.data("sparkline-barspacing")||2,g=a.data("sparkline-negbar-color")||"#A90329",h=a.data("sparkline-barstacked-color")||["#A90329","#0099c6","#98AA56","#da532c","#4490B1","#6E9461","#990099","#B4CAD3"];a.sparkline("html",{type:"bar",barColor:c,type:b,height:d,barWidth:e,barSpacing:f,stackedBarColor:h,negBarColor:g,zeroAxis:"false"})}if("line"==b){var d=a.data("sparkline-height")||"20px",i=a.data("sparkline-width")||"90px",j=a.data("sparkline-line-color")||a.css("color")||"#0000f0",k=a.data("sparkline-line-width")||1,l=a.data("fill-color")||"#c0d0f0",m=a.data("sparkline-spot-color")||"#f08000",n=a.data("sparkline-minspot-color")||"#ed1c24",o=a.data("sparkline-maxspot-color")||"#f08000",p=a.data("sparkline-highlightspot-color")||"#50f050",q=a.data("sparkline-highlightline-color")||"f02020",r=a.data("sparkline-spotradius")||1.5;thisChartMinYRange=a.data("sparkline-min-y")||"undefined",thisChartMaxYRange=a.data("sparkline-max-y")||"undefined",thisChartMinXRange=a.data("sparkline-min-x")||"undefined",thisChartMaxXRange=a.data("sparkline-max-x")||"undefined",thisMinNormValue=a.data("min-val")||"undefined",thisMaxNormValue=a.data("max-val")||"undefined",thisNormColor=a.data("norm-color")||"#c0c0c0",thisDrawNormalOnTop=a.data("draw-normal")||!1,a.sparkline("html",{type:"line",width:i,height:d,lineWidth:k,lineColor:j,fillColor:l,spotColor:m,minSpotColor:n,maxSpotColor:o,highlightSpotColor:p,highlightLineColor:q,spotRadius:r,chartRangeMin:thisChartMinYRange,chartRangeMax:thisChartMaxYRange,chartRangeMinX:thisChartMinXRange,chartRangeMaxX:thisChartMaxXRange,normalRangeMin:thisMinNormValue,normalRangeMax:thisMaxNormValue,normalRangeColor:thisNormColor,drawNormalOnTop:thisDrawNormalOnTop})}if("pie"==b){var s=a.data("sparkline-piecolor")||["#B4CAD3","#4490B1","#98AA56","#da532c","#6E9461","#0099c6","#990099","#717D8A"],t=a.data("sparkline-piesize")||90,u=a.data("border-color")||"#45494C",v=a.data("sparkline-offset")||0;a.sparkline("html",{type:"pie",width:t,height:t,tooltipFormat:'<span style="color: {{color}}">&#9679;</span> ({{percent.1}}%)',sliceColors:s,offset:0,borderWidth:1,offset:v,borderColor:u})}if("box"==b){var w=a.data("sparkline-width")||"auto",x=a.data("sparkline-height")||"auto",y=a.data("sparkline-boxraw")||!1,z=a.data("sparkline-targetval")||"undefined",A=a.data("sparkline-min")||"undefined",B=a.data("sparkline-max")||"undefined",C=a.data("sparkline-showoutlier")||!0,D=a.data("sparkline-outlier-iqr")||1.5,E=a.data("sparkline-spotradius")||1.5,F=a.css("color")||"#000000",G=a.data("fill-color")||"#c0d0f0",H=a.data("sparkline-whis-color")||"#000000",I=a.data("sparkline-outline-color")||"#303030",J=a.data("sparkline-outlinefill-color")||"#f0f0f0",K=a.data("sparkline-outlinemedian-color")||"#f00000",L=a.data("sparkline-outlinetarget-color")||"#40a020";a.sparkline("html",{type:"box",width:w,height:x,raw:y,target:z,minValue:A,maxValue:B,showOutliers:C,outlierIQR:D,spotRadius:E,boxLineColor:F,boxFillColor:G,whiskerColor:H,outlierLineColor:I,outlierFillColor:J,medianColor:K,targetColor:L})}if("bullet"==b){var M=a.data("sparkline-height")||"auto",N=a.data("sparkline-width")||2,O=a.data("sparkline-bullet-color")||"#ed1c24",P=a.data("sparkline-performance-color")||"#3030f0",Q=a.data("sparkline-bulletrange-color")||["#d3dafe","#a8b6ff","#7f94ff"];a.sparkline("html",{type:"bullet",height:M,targetWidth:N,targetColor:O,performanceColor:P,rangeColors:Q})}if("discrete"==b){var R=a.data("sparkline-height")||26,S=a.data("sparkline-width")||50,T=a.css("color"),U=a.data("sparkline-line-height")||5,V=a.data("sparkline-threshold")||"undefined",W=a.data("sparkline-threshold-color")||"#ed1c24";a.sparkline("html",{type:"discrete",width:S,height:R,lineColor:T,lineHeight:U,thresholdValue:V,thresholdColor:W})}if("tristate"==b){var X=a.data("sparkline-height")||26,Y=(a.data("sparkline-posbar-color")||"#60f060",a.data("sparkline-negbar-color")||"#f04040"),Z=a.data("sparkline-zerobar-color")||"#909090",_=a.data("sparkline-barwidth")||5,ab=a.data("sparkline-barspacing")||2,bb=a.data("sparkline-zeroaxis")||!1;a.sparkline("html",{type:"tristate",height:X,posBarColor:cb,negBarColor:Y,zeroBarColor:Z,barWidth:_,barSpacing:ab,zeroAxis:bb})}if("compositebar"==b){var d=a.data("sparkline-height")||"20px",i=a.data("sparkline-width")||"100%",e=a.data("sparkline-barwidth")||3,k=a.data("sparkline-line-width")||1,j=a.data("sparkline-color-top")||"#ed1c24",cb=a.data("sparkline-color-bottom")||"#333333";a.sparkline(a.data("sparkline-bar-val"),{type:"bar",width:i,height:d,barColor:cb,barWidth:e}),a.sparkline(a.data("sparkline-line-val"),{width:i,height:d,lineColor:j,lineWidth:k,composite:!0,fillColor:!1})}if("compositeline"==b){var d=a.data("sparkline-height")||"20px",i=a.data("sparkline-width")||"90px",db=a.data("sparkline-bar-val"),eb=a.data("sparkline-bar-val-spots-top")||null,fb=a.data("sparkline-bar-val-spots-bottom")||null,gb=a.data("sparkline-line-width-top")||1,hb=a.data("sparkline-line-width-bottom")||1,ib=a.data("sparkline-color-top")||"#333333",jb=a.data("sparkline-color-bottom")||"#ed1c24",kb=a.data("sparkline-spotradius-top")||1.5,lb=a.data("sparkline-spotradius-bottom")||kb,m=a.data("sparkline-spot-color")||"#f08000",mb=a.data("sparkline-minspot-color-top")||"#ed1c24",nb=a.data("sparkline-maxspot-color-top")||"#f08000",ob=a.data("sparkline-minspot-color-bottom")||mb,pb=a.data("sparkline-maxspot-color-bottom")||nb,qb=a.data("sparkline-highlightspot-color-top")||"#50f050",rb=a.data("sparkline-highlightline-color-top")||"#f02020",sb=a.data("sparkline-highlightspot-color-bottom")||qb,tb=a.data("sparkline-highlightline-color-bottom")||rb,ub=a.data("sparkline-fillcolor-top")||"transparent",vb=a.data("sparkline-fillcolor-bottom")||"transparent";a.sparkline(db,{type:"line",spotRadius:kb,spotColor:m,minSpotColor:mb,maxSpotColor:nb,highlightSpotColor:qb,highlightLineColor:rb,valueSpots:eb,lineWidth:gb,width:i,height:d,lineColor:ib,fillColor:ub}),a.sparkline(a.data("sparkline-line-val"),{type:"line",spotRadius:lb,spotColor:m,minSpotColor:ob,maxSpotColor:pb,highlightSpotColor:sb,highlightLineColor:tb,valueSpots:fb,lineWidth:hb,width:i,height:d,lineColor:jb,composite:!0,fillColor:vb})}}),$.fn.easyPieChart&&$(".easy-pie-chart").each(function(){var a=$(this),b=a.css("color")||a.data("pie-color"),c=a.data("pie-track-color")||"#eeeeee",d=parseInt(a.data("pie-size"))||25;a.easyPieChart({barColor:b,trackColor:c,scaleColor:!1,lineCap:"butt",lineWidth:parseInt(d/8.5),animate:1500,rotate:-90,size:d,onStep:function(a){this.$el.find("span").text(~~a)}})})}function setup_widgets_desktop(){$.fn.jarvisWidgets&&$.enableJarvisWidgets&&$("#widget-grid").jarvisWidgets({grid:"article",widgets:".jarviswidget",localStorage:!0,deleteSettingsKey:"#deletesettingskey-options",settingsKeyLabel:"Reset settings?",deletePositionKey:"#deletepositionkey-options",positionKeyLabel:"Reset position?",sortable:!0,buttonsHidden:!1,toggleButton:!0,toggleClass:"fa fa-minus | fa fa-plus",toggleSpeed:200,onToggle:function(){},deleteButton:!0,deleteClass:"fa fa-times",deleteSpeed:200,onDelete:function(){},editButton:!0,editPlaceholder:".jarviswidget-editbox",editClass:"fa fa-cog | fa fa-save",editSpeed:200,onEdit:function(){},colorButton:!0,fullscreenButton:!0,fullscreenClass:"fa fa-expand | fa fa-compress",fullscreenDiff:3,onFullscreen:function(){},customButton:!1,customClass:"folder-10 | next-10",customStart:function(){alert("Hello you, this is a custom button...")},customEnd:function(){alert("bye, till next time...")},buttonOrder:"%refresh% %custom% %edit% %toggle% %fullscreen% %delete%",opacity:1,dragHandle:"> header",placeholderClass:"jarviswidget-placeholder",indicator:!0,indicatorTime:600,ajax:!0,timestampPlaceholder:".jarviswidget-timestamp",timestampFormat:"Last update: %m%/%d%/%y% %h%:%i%:%s%",refreshButton:!0,refreshButtonClass:"fa fa-refresh",labelError:"Sorry but there was a error:",labelUpdated:"Last Update:",labelRefresh:"Refresh",labelDelete:"Delete widget:",afterLoad:function(){},rtl:!1,onChange:function(){},onSave:function(){},ajaxnav:$.navAsAjax})}function setup_widgets_mobile(){$.enableMobileWidgets&&$.enableJarvisWidgets&&setup_widgets_desktop()}function loadScript(a,b){if(jsArray[a])b&&b();else{jsArray[a]=!0;var c=document.getElementsByTagName("body")[0],d=document.createElement("script");d.type="text/javascript",d.src=a,d.onload=b,c.appendChild(d)}}function enableComments(){var a=$("#commentsContainer");a.length&&($("#comment-textarea").atwho({at:"@",data:"/ajaxsearch/userall",search_key:"name",limit:5,delay:300,tpl:'<li data-value="${name}">${name} <small>${email}</small></li>',insert_tpl:'<input type="button" value="@${name}" data-id="${id}" title="${email}" class="usermention btn btn-default btn-xs" />',show_the_at:!0}),a.on("submit",function(b){if(""!==$.trim($("#comment-textarea").text())){b.preventDefault();var c=a.serialize(),d=$("#comment-textarea").find(".usermention").map(function(){return $(this).attr("data-id")}).get();c+="&usermention="+encodeURIComponent(d);var e=$("#comment-textarea").clone();e.find(".usermention").each(function(){$(this).append("<span>"+this.attributes.value.value+"</span>")}),c+="&comment="+encodeURIComponent(e.text()),$("#comment-textarea").attr("disabled","disabled"),$("#comment-submit").attr("disabled","disabled"),Messenger({extraClasses:"messenger-on-top messenger-fixed"}).run({id:"notif-top",errorMessage:"Error posting comment",successMessage:"Comment posted",progressMessage:"Posting comment..",action:$.ajax},{type:"POST",url:a.attr("action"),data:c,success:function(){presenceChannelCurrent&&null!==document.getElementById("channel_name")&&presenceChannelCurrent.trigger("client-new-chat",{user:presenceChannelCurrent.members.me,msg:encodeURIComponent(e.text()),mentions:encodeURIComponent(d)}),$("#chat-body").load("/comment/listcomment/"+document.getElementById("commentable_key").value,function(){$("#comment-textarea").html(""),$("#comment-textarea").removeAttr("disabled"),$("#comment-submit").removeAttr("disabled")})},error:function(a){return $("#comment-textarea").removeAttr("disabled"),$("#comment-submit").removeAttr("disabled"),a.responseText}})}else alert("You cannot send an empty comment");return!1}),presenceChannelCurrent&&null!==document.getElementById("channel_name")&&presenceChannelCurrent.bind("client-new-chat",function(a){$("#chat-body").load("/comment/listcomment/"+document.getElementById("commentable_key").value,function(){Messenger({extraClasses:"messenger-fixed messenger-on-bottom messenger-on-right"}).post({showCloseButton:!0,type:"info",message:avatarHTML(a.user)+' has commented "'+a.msg+'" - <i>just now</i>',hideAfter:10})})}))}function checkURL(){var a=location.hash.replace(/^#/,"");if(container=$("#content"),a){$("nav li.active").removeClass("active"),$('nav li:has(a[href="'+a+'"])').addClass("active");var b=$('nav a[href="'+a+'"]').attr("title");document.title=b||document.title,loadURL(a+location.search,container)}else{var c=$('nav > ul > li:first-child > a[href!="#"]');window.location.hash=c.attr("href")}}function loadURL(a,b){$.ajax({type:"GET",url:a,dataType:"html",cache:!0,beforeSend:function(){b.html('<h1><i class="fa fa-cog fa-spin"></i> Loading...</h1>'),b[0]==$("#content")[0]&&(drawBreadCrumb(),$("html").animate({scrollTop:0},"fast"))},success:function(a){b.css({opacity:"0.0"}).html(a).delay(50).animate({opacity:"1.0"},300)},error:function(){b.html('<h4 style="margin-top:10px; display:block; text-align:left"><i class="fa fa-warning txt-color-orangeDark"></i> Error 404! Page not found.</h4>')},async:!1})}function pageSetUp(){"desktop"===$.device?($("[rel=tooltip]").tooltip(),$("[rel=popover]").popover(),$("[rel=popover-hover]").popover({trigger:"hover"}),runAllCharts(),setup_widgets_desktop(),nav_page_height(),runAllForms(),maintainRecentProject(),$("#clear-project").on("click",function(){clearRecentProject()})):($("[rel=popover]").popover(),$("[rel=popover-hover]").popover({trigger:"hover"}),runAllCharts(),setup_widgets_mobile(),nav_page_height(),runAllForms())}function notification_check(){$this=$("#activity > .badge"),parseInt($this.text())>0&&$this.addClass("bg-color-red bounceIn animated")}function shortcut_buttons_hide(){$.shortcut_dropdown.animate({height:"hide"},300,"easeOutCirc"),$.root_.removeClass("shortcut-on")}function shortcut_buttons_show(){$.shortcut_dropdown.animate({height:"show"},200,"easeOutCirc"),$.root_.addClass("shortcut-on")}function nav_page_height(){var a=$("#main").height(),b=$(window).height()-$.navbar_height;a>b?($.left_panel.css("min-height",a+"px"),$.root_.css("min-height",a+$.navbar_height+"px")):($.left_panel.css("min-height",b+"px"),$.root_.css("min-height",b+"px"))}function check_if_mobile_width(){$(window).width()<979?$.root_.addClass("mobile-view-activated"):$.root_.hasClass("mobile-view-activated")&&$.root_.removeClass("mobile-view-activated")}var jsArray={},topmsg,uploadmsg;$.throttle_delay=350,$.menu_speed=235,$.navbar_height=49,$.root_=$("body"),$.document_=$(document),$.left_panel=$("#left-panel"),$.shortcut_dropdown=$("#shortcut"),$.bread_crumb=$("#ribbon ol.breadcrumb"),$.maindiv=$("#main"),$.leftsidemenu=$("#leftsidemenu"),$.notification_list=$("#notification-list"),$.notification_count=$("#activity-badge"),$.device=null,$.navAsAjax=!1,$.enableJarvisWidgets=!0,$.enableMobileWidgets=!1;var ismobile=/iphone|ipad|ipod|android|blackberry|mini|windows\sce|palm/i.test(navigator.userAgent.toLowerCase());ismobile?($.root_.addClass("mobile-detected"),$.device="mobile"):($.root_.addClass("desktop-detected"),$.device="desktop"),$.pjax.defaults.timeout=3e4,$.pjax.defaults.container="#main";var pusher=new Pusher("d34044dc68acb4ac2833",{authEndpoint:"/pusher/auth"}),presenceChannelCurrent=null,presenceChannelNotification,presenceChannelCurrentSubscriptions=[];String.prototype.ucfirst=function(){return this.charAt(0).toUpperCase()+this.substr(1)},function(a,b,c){function d(){e=b[h](function(){f.each(function(){var b=a(this),c=b.width(),d=b.height(),e=a.data(this,j);(c!==e.w||d!==e.h)&&b.trigger(i,[e.w=c,e.h=d])}),d()},g[k])}var e,f=a([]),g=a.resize=a.extend(a.resize,{}),h="setTimeout",i="resize",j=i+"-special-event",k="delay",l="throttleWindow";g[k]=a.throttle_delay,g[l]=!0,a.event.special[i]={setup:function(){if(!g[l]&&this[h])return!1;var b=a(this);f=f.add(b),a.data(this,j,{w:b.width(),h:b.height()}),1===f.length&&d()},teardown:function(){if(!g[l]&&this[h])return!1;var b=a(this);f=f.not(b),b.removeData(j),f.length||clearTimeout(e)},add:function(b){function d(b,d,f){var g=a(this),h=a.data(this,j);h.w=d!==c?d:g.width(),h.h=f!==c?f:g.height(),e.apply(this,arguments)}if(!g[l]&&this[h])return!1;var e;return a.isFunction(b)?(e=b,d):(e=b.handler,void(b.handler=d))}}}(jQuery,this),$.fn.extend({jarvismenu:function(a){var b={accordion:"true",speed:200,closedSign:"[+]",openedSign:"[-]"},c=$.extend(b,a),d=$(this);d.find("li").each(function(){0!=$(this).find("ul").size()&&($(this).find("a:first").append("<b class='collapse-sign'>"+c.closedSign+"</b>"),"#"==$(this).find("a:first").attr("href")&&$(this).find("a:first").click(function(){return!1}))}),d.find("li.active").each(function(){$(this).parents("ul").slideDown(c.speed),$(this).parents("ul").parent("li").find("b:first").html(c.openedSign),$(this).parents("ul").parent("li").addClass("open")}),d.find("li a").click(function(){0!=$(this).parent().find("ul").size()&&(c.accordion&&($(this).parent().find("ul").is(":visible")||(parents=$(this).parent().parents("ul"),visible=d.find("ul:visible"),visible.each(function(a){var b=!0;parents.each(function(c){return parents[c]==visible[a]?(b=!1,!1):void 0}),b&&$(this).parent().find("ul")!=visible[a]&&$(visible[a]).slideUp(c.speed,function(){$(this).parent("li").find("b:first").html(c.closedSign),$(this).parent("li").removeClass("open")})}))),$(this).parent().find("ul:first").is(":visible")&&!$(this).parent().find("ul:first").hasClass("active")?$(this).parent().find("ul:first").slideUp(c.speed,function(){$(this).parent("li").removeClass("open"),$(this).parent("li").find("b:first").delay(c.speed).html(c.closedSign)}):$(this).parent().find("ul:first").slideDown(c.speed,function(){$(this).parent("li").addClass("open"),$(this).parent("li").find("b:first").delay(c.speed).html(c.openedSign)}))})}}),jQuery.fn.doesExist=function(){return jQuery(this).length>0},function(){var a;a=jQuery,a.fn.extend({rowslide:function(b){var c,d,e;return c=this,d=this.find("td"),$row_id=c.attr("id"),e=this.getTallestTd(d),c.animate({opacity:0},80,function(){var f,g;return d.each(function(){return this!==e?(a(this).empty(),a(this).css("padding","0")):void 0}),f=a(e),g=a("<div/>"),g.css(f.css("padding")),f.css("padding","0"),f.wrapInner(g),f.children("div").animate({height:"hide"},100,"swing",function(){return c.remove(),b?b():void 0})})},getTallestTd:function(b){var c,d;return d=-1,c=0,b.each(function(b,e){return a(e).height()>c?(d=b,c=a(e).height()):void 0}),b.get(d)}})}.call(this);var gMapsLoaded=!1;window.gMapsCallback=function(){gMapsLoaded=!0,$(window).trigger("gMapsLoaded")},window.loadGoogleMaps=function(){if(gMapsLoaded)return window.gMapsCallback();var a=document.createElement("script");a.setAttribute("type","text/javascript"),a.setAttribute("src","http://maps.google.com/maps/api/js?sensor=false&callback=gMapsCallback"),(document.getElementsByTagName("head")[0]||document.documentElement).appendChild(a)};var jsArray={};$.navAsAjax&&($("nav").length&&checkURL(),$(document).on("click",'nav a[href!="#"]',function(a){a.preventDefault();var b=$(a.currentTarget);b.parent().hasClass("active")||b.attr("target")||($.root_.hasClass("mobile-view-activated")?($.root_.removeClass("hidden-menu"),window.setTimeout(function(){window.location.search?window.location.href=window.location.href.replace(window.location.search,"").replace(window.location.hash,"")+"#"+b.attr("href"):window.location.hash=b.attr("href")},150)):window.location.search?window.location.href=window.location.href.replace(window.location.search,"").replace(window.location.hash,"")+"#"+b.attr("href"):window.location.hash=b.attr("href"))}),$(document).on("click",'nav a[target="_blank"]',function(a){a.preventDefault();var b=$(a.currentTarget);window.open(b.attr("href"))}),$(document).on("click",'nav a[target="_top"]',function(a){a.preventDefault();var b=$(a.currentTarget);window.location=b.attr("href")}),$(document).on("click",'nav a[href="#"]',function(a){a.preventDefault()}),$(window).on("hashchange",function(){checkURL()})),$.document_.pjax("a.pjax","#main"),$.document_.on("pjax:success, pjax:end",function(){$(".popover, .tooltip").remove(),"undefined"!=typeof $("#content").attr("data-js")?main[$("#content").attr("data-js").toString()]():messenger_hidenotiftop()}),$.document_.on("pjax:beforeSend",function(){messenger_notiftop("Loading..","info",0)}),$.document_.on("pjax:beforeReplace",function(){presenceChannelCurrent&&null!==document.getElementById("channel_name")&&presenceChannelCurrent.unsubscribe("presence-"+document.getElementById("channel_name").value)});var allBloodhound=new Bloodhound({datumTokenizer:Bloodhound.tokenizers.obj.whitespace("value"),queryTokenizer:Bloodhound.tokenizers.whitespace,remote:{url:"/search/all/%QUERY",ajax:{error:function(){messenger_notiftop("Search service encountered an error. Please contact your administrator.","error",5)}}}});allBloodhound.initialize(),allBloodhound.clearRemoteCache(),$("#search-fld").typeahead(null,{name:"all",displayKey:"value",source:allBloodhound.ttAdapter(),highlight:!0,templates:{empty:['<div class="empty-message">',"No suggestions for your search","</div>"].join("\n"),suggestion:Handlebars.compile('<p><div>{{{highlight}}}</div><div><i class="fa fa-fw {{icon}}" title="{{title}}"/><a href="{{url}}" class="pjax">{{value}}</a></div></p>')}}).on("typeahead:selected",function(a,b){$.pjax({url:b.url})}),$("form.header-search").on("submit",function(){var a=$(this);return $.pjax({container:"#main",timeout:1e4,url:"/search",data:a.serialize()}),!1}),$.validator.setDefaults({highlight:function(a){$(a).closest(".form-group").addClass("has-error")},unhighlight:function(a){$(a).closest(".form-group").removeClass("has-error")},errorElement:"span",errorClass:"help-block",errorPlacement:function(a,b){a.insertAfter(b.parent(".input-group").length?b.parent():b)}}),$("[rel=tooltip]").length&&$("[rel=tooltip]").tooltip(),nav_page_height(),$.leftsidemenu.children("ul").jarvismenu({accordion:!0,speed:$.menu_speed,closedSign:'<em class="fa fa-expand-o"></em>',openedSign:'<em class="fa fa-collapse-o"></em>'}),$.leftsidemenu.on("click","a",function(){$("nav li.active").removeClass("active"),$(this).parent("li").addClass("active")}),$(".minifyme").click(function(a){$("body").toggleClass("minified"),$(this).effect("highlight",{},500),a.preventDefault()}),$("#hide-menu >:first-child > a").click(function(a){$("body").toggleClass("hidden-menu"),a.preventDefault()}),$("#search-mobile").click(function(){$.root_.addClass("search-mobile")}),$("#cancel-search-js").click(function(){$.root_.removeClass("search-mobile")}),$("#activity").click(function(a){var b=$(this);b.find(".badge").hasClass("bg-color-red")&&(b.find(".badge").removeClassPrefix("bg-color-"),b.find(".badge").text("0"),$.ajax({url:"/notification/markread"})),b.next(".ajax-dropdown").is(":visible")?(b.next(".ajax-dropdown").fadeOut(150),b.removeClass("active")):(b.next(".ajax-dropdown").fadeIn(150),b.addClass("active"));b.next(".ajax-dropdown").find(".btn-group > .active > input").attr("id");a.preventDefault()}),$('input[name="activity"]').change(function(){var a=$(this);url=a.attr("id"),container=$(".ajax-notifications"),loadURL(url,container)}),$(document).mouseup(function(a){$(".ajax-dropdown").is(a.target)||0!==$(".ajax-dropdown").has(a.target).length||($(".ajax-dropdown").fadeOut(150),$(".ajax-dropdown").prev().removeClass("active"))}),$("button[data-loading-text]").on("click",function(){var a=$(this);a.button("loading"),setTimeout(function(){a.button("reset")},3e3)}),notification_check(),$("#refresh").click(function(a){$.SmartMessageBox({title:"<i class='fa fa-refresh' style='color:green'></i> Clear Local Storage",content:"Would you like to RESET all your saved widgets and clear LocalStorage?",buttons:"[No][Yes]"},function(a){"Yes"==a&&localStorage&&(localStorage.clear(),location.reload())}),a.preventDefault()}),$("#logout a").on("click",function(a){a.preventDefault(),a.stopPropagation();var b=$(this);return $.loginURL=b.attr("href"),$.logoutMSG=b.data("logout-msg"),$.SmartMessageBox({title:"<i class='fa fa-sign-out txt-color-orangeDark'></i> Logout <span class='txt-color-orangeDark'><strong>"+$.trim($("#show-shortcut").find("span.text").html())+"</strong></span> ?",content:$.logoutMSG||"You can improve your security further after logging out by closing this opened browser",buttons:"[No][Yes]"},function(a){return"Yes"!=a?!1:($.root_.addClass("animated fadeOutUp"),void(window.location=$.loginURL))})}),pusher_user(),$.shortcut_dropdown.find("a").click(function(a){a.preventDefault(),window.location=$(this).attr("href"),setTimeout(shortcut_buttons_hide,300)}),$(document).mouseup(function(a){$.shortcut_dropdown.is(a.target)||0!==$.shortcut_dropdown.has(a.target).length||shortcut_buttons_hide()}),$("#main").resize(function(){nav_page_height(),check_if_mobile_width()}),$("nav").resize(function(){nav_page_height()}),$("body").on("click",function(a){$('[rel="popover"]').each(function(){$(this).is(a.target)||0!==$(this).has(a.target).length||0!==$(".popover").has(a.target).length||$(this).popover("hide")})});var main={dashboard:function(){"undefined"==typeof window.dashboard?jsLoader(["/js/plugin/jquery-infinitescroll/jquery.infinitescroll.min.js","/js/swift/swift.dashboard.js"]):(pageSetUp(),dashboard())},swift_search:function(){"undefined"==typeof window.swift_search?jsLoader(["/js/swift/swift.search.js"]):(pageSetUp(),swift_search())},inbox:function(){function a(){var a=$(window).height()-212;320>a?$(".table-wrap").css("height","320px"):$(".table-wrap").css("height",a+"px")}function b(){loadURL("ajax/email-opened.html",$("#inbox-content > .table-wrap"))}function c(){var a=$(".inbox-table-icon input:checkbox").is(":checked");a?$(".inbox-checkbox-triggered").addClass("visible"):$(".inbox-checkbox-triggered").removeClass("visible")}pageSetUp(),a(),$(window).resize(function(){a()}),$("#inbox-table [rel=tooltip]").tooltip(),$("#inbox-table input[type='checkbox']").change(function(){$(this).closest("tr").toggleClass("highlight",this.checked)}),$("#inbox-table .inbox-data-message").click(function(){$this=$(this),b($this)}),$("#inbox-table .inbox-data-from").click(function(){$this=$(this),b($this)
}),$(".inbox-table-icon input:checkbox").click(function(){c()}),$(".deletebutton").click(function(){$("#inbox-table td input:checkbox:checked").parents("tr").rowslide()}),messenger_hidenotiftop()},ot_overview:function(){"undefined"==typeof window.ot_overview?jsLoader(["/js/swift/swift.ot_overview.js"]):(pageSetUp(),ot_overview())},ot_create:function(){"undefined"==typeof window.ot_create?jsLoader(["/js/swift/swift.ot_create.js"]):(pageSetUp(),ot_create())},ot_view:function(){"undefined"==typeof window.ot_view?jsLoader(["/js/swift/swift.ot_view.js"]):(pageSetUp(),ot_view())},ot_edit:function(){"undefined"==typeof window.ot_edit?jsLoader(["/js/swift/swift.ot_edit.js"]):(pageSetUp(),ot_edit())},ot_forms:function(){"undefined"==typeof window.ot_forms?jsLoader(["/js/swift/swift.ot_forms.js"]):(pageSetUp(),ot_forms())},ot_summary:function(){"undefined"==typeof window.ot_summary?jsLoader(["/js/plugin/datatables/jquery.dataTables-all.min.js","/js/swift/swift.ot_summary.js"]):(pageSetUp(),ot_summary())},fc_forms:function(){"undefined"==typeof window.fc_forms?jsLoader(["/js/swift/swift.fc_forms.js"]):(pageSetUp(),fc_forms())},fc_create:function(){"undefined"==typeof window.fc_create?jsLoader(["/js/swift/swift.fc_create.js"]):(pageSetUp(),fc_create())},fc_edit:function(){"undefined"==typeof window.fc_edit?jsLoader(["/js/swift/swift.fc_edit.js"]):(pageSetUp(),fc_edit())},ncrm_machinecreate:function(){"undefined"==typeof window.ncrm_machinecreate?jsLoader(["/js/swift/swift.ncrm_machinecreate.js"]):(pageSetUp(),ncrm_machinecreate())},apr_forms:function(){"undefined"==typeof window.apr_forms?jsLoader(["/js/swift/swift.apr_forms.js"]):(pageSetUp(),apr_forms())},apr_create:function(){"undefined"==typeof window.apr_create?jsLoader(["/js/swift/swift.apr_create.js"]):(pageSetUp(),apr_create())},apr_view:function(){"undefined"==typeof window.apr_view?jsLoader(["/js/swift/swift.apr_view.js"]):(pageSetUp(),apr_view())},apr_edit:function(){"undefined"==typeof window.apr_edit?jsLoader(["/js/swift/swift.apr_edit.js"]):(pageSetUp(),apr_edit())},apr_overview:function(){"undefined"==typeof window.apr_overview?jsLoader(["/js/swift/swift.apr_overview.js"]):(pageSetUp(),apr_overview())},apr_statistics:function(){"undefined"==typeof window.apr_statistics?jsLoader(["/js/plugin/morris/raphael.2.1.0.min.js","/js/plugin/morris/morris.min.js","/js/swift/swift.apr_statistics.js"]):(pageSetUp(),apr_statistics())}};