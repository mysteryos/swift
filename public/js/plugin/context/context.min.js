var context=context||function(){function e(e){a=$.extend({},a,e),$(document).on("click","html",function(){$(".dropdown-context").fadeOut(a.fadeSpeed,function(){$(".dropdown-context").css({display:""}).find(".drop-left").removeClass("drop-left")})}),a.preventDoubleContext&&$(document).on("contextmenu",".dropdown-context",function(e){e.preventDefault()}),$(document).on("mouseenter",".dropdown-submenu",function(){var e=$(this).find(".dropdown-context-sub:first"),t=e.width(),n=e.offset().left,o=t+n>window.innerWidth;o&&e.addClass("drop-left")})}function t(e){a=$.extend({},a,e)}function n(e,t,o){var d=o?" dropdown-context-sub":"",f=a.compress?" compressed-context":"",i=$('<ul class="dropdown-menu dropdown-context'+d+f+'" id="dropdown-'+t+'"></ul>'),p=0,r="";for(p;p<e.length;p++){if("undefined"!=typeof e[p].divider)i.append('<li class="divider"></li>');else if("undefined"!=typeof e[p].header)i.append('<li class="nav-header">'+e[p].header+"</li>");else{if("undefined"==typeof e[p].href&&(e[p].href="#"),"undefined"!=typeof e[p].target&&(r=' target="'+e[p].target+'"'),$sub="undefined"!=typeof e[p].subMenu?'<li class="dropdown-submenu"><a tabindex="-1" href="'+e[p].href+'">'+e[p].text+"</a></li>":$('<li><a tabindex="-1" href="'+e[p].href+'"'+r+">"+e[p].text+"</a></li>"),"undefined"!=typeof e[p].action){var u=new Date,s="event-"+u.getTime()*Math.floor(1e5*Math.random()),c=e[p].action;$sub.find("a").attr("id",s),$("#"+s).addClass("context-event"),$(document).on("click","#"+s,c)}if(i.append($sub),"undefined"!=typeof e[p].subMenu){var l=n(e[p].subMenu,t,!0);i.find("li:last").append(l)}}"function"==typeof a.filter&&a.filter(i.find("li:last"))}return i}function o(e,t){var o=new Date,d=o.getTime(),f=n(t,d);$("body").append(f),$(document).on("contextmenu",e,function(e){if(e.preventDefault(),e.stopPropagation(),$(".dropdown-context:not(.dropdown-context-sub)").hide(),$dd=$("#dropdown-"+d),"boolean"==typeof a.above&&a.above)$dd.addClass("dropdown-context-up").css({top:e.pageY-20-$("#dropdown-"+d).height(),left:e.pageX-13}).fadeIn(a.fadeSpeed);else if("string"==typeof a.above&&"auto"==a.above){$dd.removeClass("dropdown-context-up");var t=$dd.height()+12;e.pageY+t>$("html").height()?$dd.addClass("dropdown-context-up").css({top:e.pageY-20-t,left:e.pageX-13}).fadeIn(a.fadeSpeed):$dd.css({top:e.pageY+10,left:e.pageX-13}).fadeIn(a.fadeSpeed)}})}function d(e){$(document).off("contextmenu",e).off("click",".context-event")}var a={fadeSpeed:100,filter:function(){},above:"auto",preventDoubleContext:!0,compress:!1};return{init:e,settings:t,attach:o,destroy:d}}();